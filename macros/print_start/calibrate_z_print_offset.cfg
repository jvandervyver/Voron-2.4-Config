[gcode_macro CALIBRATE_Z_PRINT_OFFSET]

description: Recalibrate Z axis and adjust nozzle offset
gcode:
    {% set EXTRUDER_TEMPERATURE = params.EXTRUDER_TEMPERATURE if params.EXTRUDER_TEMPERATURE|string|trim != '' %}
    {% if EXTRUDER_TEMPERATURE is not defined %}
        { action_raise_error("No EXTRUDER_TEMPERATURE specified") }        
    {% endif %}

    HEAT_EXTRUDER TEMPERATURE={EXTRUDER_TEMPERATURE} SETTLE_WAIT_TIME=90 ; Make sure the extruder is a the right temperature

    CLEAN_NOZZLE WIPE_QUANTITY=10

    G28 Z